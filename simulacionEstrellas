<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulación de Estrellas en VR</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <style>
      body { margin: 0; }
    </style>
  </head>
  <body>
    <a-scene>
      <!-- Cielo oscuro -->
      <a-sky color="#001d3d"></a-sky>

      <!-- Contenedor para las estrellas -->
      <a-entity id="estrellas"></a-entity>

      <!-- Superficie del exoplaneta -->
      <a-plane position="0 0 -10" rotation="-90 0 0" width="100" height="100" color="#228B22"></a-plane>

      <!-- Cámara con controles de movimiento y soporte VR -->
      <a-entity camera position="0 1.6 0" look-controls wasd-controls></a-entity>
    </a-scene>

    <script>
    // Función para cargar el archivo JSON con las estrellas
    async function cargarEstrellasJSON(ruta) {
      try {
        const response = await fetch(ruta);
        const estrellas = await response.json();
        return estrellas;
      } catch (error) {
        console.error("Error al cargar el archivo JSON:", error);
        return [];
      }
    }

    // Función para generar las esferas (estrellas) en A-Frame
    function crearEstrellasEnAFRAME(estrellas) {
      const escena = document.getElementById('estrellas');

      estrellas.forEach(estrella => {
        const estrellaElemento = document.createElement('a-sphere');

        // Extraemos las propiedades del JSON
        const { radio, posicion, color } = estrella;
        const { x, y, z } = posicion;

        // Configuramos la esfera de A-Frame con los atributos del JSON
        estrellaElemento.setAttribute('position', `${x} ${y} ${z}`);
        estrellaElemento.setAttribute('radius', radio);
        estrellaElemento.setAttribute('color', color);

        // Añadimos la estrella a la escena
        escena.appendChild(estrellaElemento);
      });
    }

    // Cargar el archivo JSON y generar las estrellas en la escena
    cargarEstrellasJSON('estrellas.json')  // Cambia esta ruta al archivo JSON generado
      .then(estrellas => {
        if (estrellas.length > 0) {
          crearEstrellasEnAFRAME(estrellas);
        } else {
          console.error('No se encontraron estrellas en el archivo JSON.');
        }
      })
      .catch(error => {
        console.error('Error al procesar las estrellas:', error);
      });
    </script>
  </body>
</html>
